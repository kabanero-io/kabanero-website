language: ruby
rvm:
  - 2.6.3

install:
  - bundle install
  - npm install eslint --save-dev
  - ./node_modules/.bin/eslint src/main/content/_assets/js/*.js

sudo: required

script: 
  - ./scripts/build_jekyll_maven.sh
before_deploy: 
- curl -L https://clis.ng.bluemix.net/download/bluemix-cli/0.6.1/linux64 | tar -zx
- chmod -R u+x ./Bluemix_CLI/bin
- chmod +x ./deploy.sh
deploy: 
  provider: script
  script: ./deploy.sh
  on:
    repo: kidus60/kabanero-website
    branch: master
  skip_cleanup: true