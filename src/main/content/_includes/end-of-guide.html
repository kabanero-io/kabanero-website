<!-----------------------------------------------------------------------------
 -
 - Copyright 2019 IBM Corporation and others.
 -
 - Licensed under the Apache License, Version 2.0 (the "License");
 - you may not use this file except in compliance with the License.
 - You may obtain a copy of the License at
 -
 -     http://www.apache.org/licenses/LICENSE-2.0
 -
 - Unless required by applicable law or agreed to in writing, software
 - distributed under the License is distributed on an "AS IS" BASIS,
 - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 - See the License for the specific language governing permissions and
 - limitations under the License.
 -
 ------------------------------------------------------------------------------>
 {% assign t = site.data[site.active_lang]._includes.end_of_guide %}

<div id="end_of_guide">
        <h2 tabindex="0">{{t.end-of-guide}}</h2>
        <div id="end_of_guide_left_section">
            <p id="guide_attribution"></p>
            <h3 id="improve_guide_feedback">{{t.improve-guide-feedback}}</h3>
            {% if page.layout == 'guide' or page.layout == 'guide-multipane' or page.layout == 'guide-markdown'  %}
                <p><a target="_blank" rel="noopener noreferrer" href="{{site.github_url}}/guide-{{page.url | replace: '/guides/', ''}}/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="{{site.github_url}}/guide-{{page.url | replace: '/guides/', ''}}/pulls">Create a pull request</a> to contribute to this guide</p>
            {% elsif page.layout == 'iguide-multipane' %}
                <p><a target="_blank" rel="noopener noreferrer" href="{{site.github_url}}/iguide-{{page.url | replace: '/guides/', ''}}/issues">Raise an issue</a> to share feedback</p>
                <p><a target="_blank" rel="noopener noreferrer" href="{{site.github_url}}/iguide-{{page.url | replace: '/guides/', ''}}/pulls">Create a pull request</a> to contribute to this guide</p>
            {% endif %}

            <h3 id="need_help">{{t.need-help}}</h3>
            <p><a target="_blank" rel="noopener noreferrer" href="{{site.stackoverflow_url}}">{{t.ask-questions}}</a></p>
            <!--
            <h3 id="feedback_rating_question">What did you think of this guide?</h3>
            <div id="feedback_ratings">
                <img class="guide_rating" id="extreme_dislike" src="/img/1_Extreme_Dislike.png" alt="Extreme Dislike" data-guide-rating="1" tabindex="0" aria-label="Rate this guide as extreme dislike">
                <img class="guide_rating" id="dislike" src="/img/2_Dislike.png" alt="Dislike" data-guide-rating="2" tabindex="0" aria-label="Rate this guide as dislike">
                <img class="guide_rating" id="like" src="/img/3_Like.png" alt="Like" data-guide-rating="3" tabindex="0" aria-label="Rate this guide as like">
                <img class="guide_rating" id="extreme_like" src="/img/4_Extreme_Like.png" alt="Extreme Like" data-guide-rating="4" tabindex="0" aria-label="Rate this guide as extreme like">
            </div>
            -->
        </div>
        <div id="end_of_guide_right_section">
            <h3 id="where_to_next">{{t.where-to-next}}</h3>

            {% if page.layout == 'iguide-multipane' %}
                <p>
                    <a target="_blank" rel="noopener noreferrer" href="{{site.github_url}}/iguide-{{page.url | replace: '/guides/', ''}}/tree/master/finish">
                    Download the sample application for this guide bundled with Kabanero on github</a></p>
                <br>
            {% endif %}
            {% if page.categories %}
            <p>{{t.keep-exploring}} <b>{{ page.categories }}</b> {{t.with-these-guides}}</p>
            {% endif %}

            <!-- Related guides section -->
            {% if page.related-guides.size > 0 %}
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                {% for related-guide in page.related-guides limit:6 %}
                    {% assign url = '/guides/' | append: related-guide | append: "/" %}
                    {% assign list = site.pages | where: 'permalink', url %}
                    {% unless list == empty %}
                        <!-- Only create a card if we find the permalink -->
                        {% assign related-guide-metadata = list[0] %}
                        <div class="col-sm-12 col-lg-6">
                            <a href="/guides/{{related-guide}}" class="small_guide_item">
                                <div class="guide-title_container">
                                    <h3 class="guide-title">{{related-guide-metadata.title}}</h3>
                                </div>
                                <img class="duration-clock-icon" src="/img/guide-duration-clock-icon-small.svg" alt="Duration">
                                <span class="guide-duration">{{related-guide-metadata.duration}}</span>
                                {% if related-guide-metadata.layout == 'interactive-guide' or related-guide-metadata.layout == 'iguide-multipane' %}
                                <div class="guide_interactive_container">
                                  <img class="interactive_bolt_icon" src="/img/guide_lightning_bolt.svg" alt="Interactive">
                                  <span class="guide_interactive">{{t.interactive}}</span>
                                </div>
                                {% endif %}
                            </a>
                        </div>
                    {% endunless %}
                {% endfor %}
                </div>
            </div>
            <!-- Link back to guides if no related guides are specified -->
            {% else %}
            <div id="related-guides">
                <div id="related-guides-cards" class="row">
                    <div class="col-sm-12">
                        <a href="/guides/">{{t.back-to-guides}}</a>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
